---
title: NLP - Text Pre-Processing VII (Special Cases)
author: Michael Fuchs
date: '2021-06-19'
slug: nlp-text-pre-processing-vii-special-cases
categories: []
tags: []
output:
  blogdown::html_page:
    toc: true
    toc_depth: 5
---


# 1 Introduction


I have already described the most common and most used Text Cleaning Steps in this post here: [Text Pre-Processing I (Text Cleaning)](https://michael-fuchs-python.netlify.app/2021/05/22/nlp-text-pre-processing-i-text-cleaning/#text-cleaning)

However, it may happen that the analysis request requires other processing of the text, for example, if numbers are not to be removed but converted into text and analyzed as well. 

This post is about such special cases.

Feel free to download the files I used from my [GitHub Repository](https://github.com/MFuchs1989/Datasets-and-Miscellaneous/tree/main/datasets/NLP/Text%20Pre-Processing%20VII%20(Special%20Cases)).



# 2 Import the Libraries


```{r, eval=F, echo=T}
import pandas as pd
from num2words import num2words
import re
```




# 3 Definition of required Functions

All functions are summarized here. I will show them again where they are used during this post if they are new and have not been explained yet.


```{r, eval=F, echo=T}
def remove_punctuation_func(text):
    '''
    Removes all punctuation from a string, if present
    
    Args:
        text (str): String to which the function is to be applied, string
    
    Returns:
        Clean string without punctuations
    '''
    return re.sub(r'[^a-zA-Z0-9]', ' ', text)
```

```{r, eval=F, echo=T}
from emo_dictonary import EMOTICONS

def emoticons_to_words_func(text):
    for emot in EMOTICONS:
        emoticon_pattern = r'('+emot+')'
        # replace
        emoticon_words = EMOTICONS[emot]
        replace_text = emoticon_words.replace(",","")
        replace_text = replace_text.replace(":","")
        replace_text_list = replace_text.split()
        emoticon_name = '_'.join(replace_text_list)
        text = re.sub(emoticon_pattern, emoticon_name, text)
    return text
```

```{r, eval=F, echo=T}
def chat_words_to_norm_words_func(text):
    '''
    Replaces common chat expressions with their spelled out form
    
    Args:
        text (str): String to which the function is to be applied, string
    
    Returns:
        Clean string with replaced chat expressions
    ''' 
    return re.sub(r'\S+', lambda m: chat_expressions_dict.get(m.group().upper(), m.group()) , text)
```

```{r, eval=F, echo=T}
def sep_num_words_func(text):
    '''
    Separates numbers from words or other characters
    
    Args:
        text (str): String to which the function is to be applied, string
    
    Returns:
        Clean string with separated numbers from words or other characters
    ''' 
    return re.sub(r"([0-9]+(\.[0-9]+)?)",r" \1 ", text).strip() 
```

```{r, eval=F, echo=T}
def num_to_words(text):


    after_spliting = text.split()

    for index in range(len(after_spliting)):
        if after_spliting[index].isdigit():
            after_spliting[index] = num2words(after_spliting[index])
    numbers_to_words = ' '.join(after_spliting)
    return numbers_to_words
```



# 4 Text Pre-Processing - Special Cases

As you may recall, in my first [Text Pre-Processing post](https://michael-fuchs-python.netlify.app/2021/05/22/nlp-text-pre-processing-i-text-cleaning/), I created a guideline for [Text Cleaning](https://michael-fuchs-python.netlify.app/2021/05/22/nlp-text-pre-processing-i-text-cleaning/#text-cleaning). The following three sections are about special cases that can be applied in text cleaning (for example, because the analysis requirements demand it). 

**However, it is of essential importance at which point the operations are performed!**

Of course I have listed this in each section and summarized it in the last chapter 'Application to a DataFrame'.


## 4.1  Converting Emoticons to Words


This operation should be performed in any case before [Removing Punctuation](https://michael-fuchs-python.netlify.app/2021/05/22/nlp-text-pre-processing-i-text-cleaning/#removing-punctuation).
I will explain why in chapter 5 Application to a DataFrame.


I found the dictionary of emoticons and emojis (emo_dictonary.py) as well as the following function in this [GitHub](https://github.com/NeelShah18/emot) Repository.








# 5 **Application** to a DataFrame


```{r, eval=F, echo=T}

```

![](/post/2021-06-19-nlp-text-pre-processing-vii-special-cases_files/p130p.png)






```{r, eval=F, echo=T}

```

![](/post/2021-06-19-nlp-text-pre-processing-vii-special-cases_files/p130p.png)











```{r, eval=F, echo=T}

```

![](/post/2021-06-19-nlp-text-pre-processing-vii-special-cases_files/p130p.png)























```{r, eval=F, echo=T}

```

![](/post/2021-06-19-nlp-text-pre-processing-vii-special-cases_files/p130p.png)




















```{r, eval=F, echo=T}

```

![](/post/2021-06-19-nlp-text-pre-processing-vii-special-cases_files/p130p.png)














```{r, eval=F, echo=T}

```

![](/post/2021-06-19-nlp-text-pre-processing-vii-special-cases_files/p130p.png)










