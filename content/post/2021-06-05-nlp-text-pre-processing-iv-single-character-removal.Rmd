---
title: NLP - Text Pre-Processing IV (Single Character Removal)
author: Michael Fuchs
date: '2021-06-05'
slug: nlp-text-pre-processing-iv-single-character-removal
categories: []
tags: []
output:
  blogdown::html_page:
    toc: true
    toc_depth: 5
---




# 1 Introduction

Now we come to another sub-area regarding text pre-processing: The removal of individual characters.

For this publication the processed dataset *Amazon Unlocked Mobile* from the statistic platform ["Kaggle"](https://www.kaggle.com) was used as well as the created Example String. You can download both files from my ["GitHub Repository"](https://github.com/MFuchs1989/Datasets-and-Miscellaneous/tree/main/datasets/NLP/Text%20Pre-Processing%20IV%20(Single%20Character%20Removal)).


# 2 Import the Libraries and the Data

```{r, eval=F, echo=T}
import pandas as pd
import numpy as np

import pickle as pk

import warnings
warnings.filterwarnings("ignore")


from bs4 import BeautifulSoup
import unicodedata
import re

from nltk.tokenize import word_tokenize
from nltk.tokenize import sent_tokenize

from nltk.corpus import stopwords


from nltk.corpus import wordnet
from nltk import pos_tag
from nltk import ne_chunk

from nltk.stem.porter import PorterStemmer
from nltk.stem.wordnet import WordNetLemmatizer

from nltk.probability import FreqDist
import matplotlib.pyplot as plt
from wordcloud import WordCloud
```


```{r, eval=F, echo=T}
pd.set_option('display.max_colwidth', 30)
```



```{r, eval=F, echo=T}
df = pd.read_csv('Amazon_Unlocked_Mobile_small_Part_III.csv')
df.head(3).T
```

![](/post/2021-06-05-nlp-text-pre-processing-iv-single-character-removal_files/p126p1.png)


```{r, eval=F, echo=T}
df['Reviews_lemmatized'] = df['Reviews_lemmatized'].astype(str)
```


```{r, eval=F, echo=T}
clean_text_lemmatized_v_a = pk.load(open("clean_text_lemmatized_v_a.pkl",'rb'))
clean_text_lemmatized_v_a
```

![](/post/2021-06-05-nlp-text-pre-processing-iv-single-character-removal_files/p126p2.png)


# 3 Definition of required Functions

All functions are summarized here. I will show them again where they are used during this post if they are new and have not been explained yet.


```{r, eval=F, echo=T}
def word_count_func(text):
    '''
    Counts words within a string
    
    Args:
        text (str): String to which the function is to be applied, string
    
    Returns:
        Number of words within a string, integer
    ''' 
    return len(text.split())
```


```{r, eval=F, echo=T}
def remove_single_char_func(text, threshold=1):
    '''
    Removes single characters from string, if present
    
    Step 1: Use word_tokenize() to get tokens from string
    Step 2: Removes words whose length falls below the threshold (by default = 1)
    
    Args:
        text (str): String to which the functions are to be applied, string
    
    Returns:
        String with removed words whose length was below the threshold (by default = 1)
    ''' 
    threshold = threshold
    
    words = word_tokenize(text)
    text = ' '.join([word for word in words if len(word) > threshold])
    return text
```


# 4 Text Pre-Processing

## 4.1 (Text Cleaning)

I have already described this part in an earlier post. See here: [Text Cleaning](https://michael-fuchs-python.netlify.app/2021/05/22/nlp-text-pre-processing-i-text-cleaning/#text-cleaning)

## 4.2 (Tokenization)

I have already described this part in an earlier post. See here: [Text Pre-Processing II-Tokenization](https://michael-fuchs-python.netlify.app/2021/05/25/nlp-text-pre-processing-ii-tokenization-and-stop-words/#tokenization)


## 4.3  (Stop Words)

I have already described this part in an earlier post. See here: [Text Pre-Processing II-Stop Words](https://michael-fuchs-python.netlify.app/2021/05/25/nlp-text-pre-processing-ii-tokenization-and-stop-words/#stop-words)



## 4.4 (Digression: POS & NER)

I have already described this part in the previous post. See here: [Text Pre-Processing III-POS & NER](https://michael-fuchs-python.netlify.app/2021/05/31/nlp-text-pre-processing-iii-pos-ner-and-normalization/#digression-pos-ner)


## 4.5  (Normalization)

I have already described this part in the previous post. See here: [Text Pre-Processing III-Normalization](https://michael-fuchs-python.netlify.app/2021/05/31/nlp-text-pre-processing-iii-pos-ner-and-normalization/#normalization)


## 4.6 Removing Single Characters

In some cases (as is the case with the Example String), single characters may still be present in a string (after using Stop Word Removal etc.).

Let's look at the following example sentence where I am aware that some characters would no longer be there after our previous steps. This example is just to show how the function works.

```{r, eval=F, echo=T}
text_for_remove_single_char = \
"This is an example string with numbers like 5 or 10 and single characters like a, b and c."
text_for_remove_single_char
```

![](/post/2021-06-05-nlp-text-pre-processing-iv-single-character-removal_files/p126p3.png)


```{r, eval=F, echo=T}
def remove_single_char_func(text, threshold=1):
    '''
    Removes single characters from string, if present
    
    Step 1: Use word_tokenize() to get tokens from string
    Step 2: Removes words whose length falls below the threshold (by default = 1)
    
    Args:
        text (str): String to which the functions are to be applied, string
    
    Returns:
        String with removed words whose length was below the threshold (by default = 1)
    ''' 
    threshold = threshold
    
    words = word_tokenize(text)
    text = ' '.join([word for word in words if len(word) > threshold])
    return text
```

Now we apply the function to our example sentence (text_for_remove_single_char) with the default settings (threshold=1). 



```{r, eval=F, echo=T}
remove_single_char_func(text_for_remove_single_char)
```

![](/post/2021-06-05-nlp-text-pre-processing-iv-single-character-removal_files/p126p4.png)


Depending on the case, the threshold can also be set high (for example, to 2 characters). 


```{r, eval=F, echo=T}
remove_single_char_func(text_for_remove_single_char, threshold=2)
```

![](/post/2021-06-05-nlp-text-pre-processing-iv-single-character-removal_files/p126p5.png)


### 4.6.1 **Application** to the Example String

I will continue at this point with the edited example string 'clean_text_lemmatized_v_a' from the last blog, which we already loaded at the beginning of this post. 


```{r, eval=F, echo=T}
clean_text_lemmatized_v_a
```

![](/post/2021-06-05-nlp-text-pre-processing-iv-single-character-removal_files/p126p6.png)


```{r, eval=F, echo=T}
clean_text_wo_single_char = remove_single_char_func(clean_text_lemmatized_v_a)
clean_text_wo_single_char
```

![](/post/2021-06-05-nlp-text-pre-processing-iv-single-character-removal_files/p126p7.png)



### 4.6.2 **Application** to the DataFrame


```{r, eval=F, echo=T}
df.head(3).T
```

![](/post/2021-06-05-nlp-text-pre-processing-iv-single-character-removal_files/p126p8.png)


#### 4.6.2.1  With Character Length = 1 (default settings)

















```{r, eval=F, echo=T}

```

![](/post/2021-06-05-nlp-text-pre-processing-iv-single-character-removal_files/p126p.png)



















```{r, eval=F, echo=T}

```

![](/post/2021-06-05-nlp-text-pre-processing-iv-single-character-removal_files/p126p.png)




















```{r, eval=F, echo=T}

```

![](/post/2021-06-05-nlp-text-pre-processing-iv-single-character-removal_files/p126p.png)













```{r, eval=F, echo=T}

```

![](/post/2021-06-05-nlp-text-pre-processing-iv-single-character-removal_files/p126p.png)










