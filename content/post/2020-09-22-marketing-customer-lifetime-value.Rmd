---
title: Marketing - Customer Lifetime Value
author: Michael Fuchs
date: '2020-09-22'
slug: marketing-customer-lifetime-value
categories:
  - R
tags:
  - R Markdown
---



# Table of Content

+ 1 Introduction
+ 2 Import the libraries and the data
+ 3 Data pre-processing
+ 3.1 Negative Quantity
+ 3.2 Missing Values within CustomerID
+ 3.3 Handling incomplete data
+ 3.4 Total Sales
+ 3.5 Create final dataframe
+ 4 Descriptive Analytics
+ 4.1 Final Dataframe for Descriptive Analytics
+ 4.2 Visualizations
+ 5 Predicting 3-Month CLV
+ 5.1 Final Dataframe for Prediction Models
+ 5.2 Building Sample Set
+ 5.3 Train Test Split
+ 5.4 Linear Regression
+ 5.5 Model Evaluation
+ 6 Conclusion




# 1 Introduction


![](/post/2020-09-22-marketing-customer-lifetime-value_files/p83s1.png)


In marketing, customer lifetime value is one of the most important metrics to keep in mind. 
This metric is especially important to keep track of for acquiring new customers.
The corporate goal of marketing kampagnien is always the acquisition of new customers under the premise of a positive ROI.
For example, if the average CLV of our customer is 100€ and it only costs 50€ to acquire a new customer, then our business will be generationg more revenue as we acquire new customers. 
If this is the other way around, our company is making losses. This is to be avoided and for this reason the CLV should always be observed. 

There are multiple ways to calculate CLV. One way is to find the customer's average purchase amount, purchase frequency and lifetime span to do a simple calculation to get the CLV.

Let us assume the following conditions: 

+ Customer's average purchase amount: 100€
+ Purchase frequency: 5 times per month

This makes an average value per month of 500€.
Now let's come to the lifetime span. 
One way to estimate a customer's lifetime span is to look at the average monthly churn rate, which is the percentage of customers leaving and terminating the relationship whith our business. We can estimate a customer's lifetime span by dividing one by the churn rate. Assuming 5% of the churn rate, the estimated customer's lifetime span is 20 years.

+ Lifetime span: 20 years

This results in a total amount of 120,000€ (500€ x 20 years x 12 months). 

Because we do not typically know the lifetime span of customers, we often try to estimate CLV over the course of a certain period (3 months, 12 months, 24 months ...). And that is exactly what we will do in the following.


For this post the dataset *Online Retail* from the statistic platform ["Kaggle"](https://www.kaggle.com) was used. You can download it from my ["GitHub Repository"](https://github.com/MFuchs1989/Bdown-Python/tree/master/datasets).



# 2 Import the libraries and the data

```{r, eval=F, echo=T}
import pandas as pd
import numpy as np


import matplotlib.pyplot as plt
from sklearn.model_selection import train_test_split
from sklearn.linear_model import LinearRegression
from sklearn import metrics
```


```{r, eval=F, echo=T}
df = pd.read_excel('Online Retail.xlsx', sheet_name='Online Retail')
df
```

![](/post/2020-09-22-marketing-customer-lifetime-value_files/p83p1.png)





# 3 Data pre-processing
# 3.1 Negative Quantity


```{r, eval=F, echo=T}

```

![](/post/2020-09-22-marketing-customer-lifetime-value_files/p83p.png)




# 3.2 Missing Values within CustomerID


```{r, eval=F, echo=T}

```

![](/post/2020-09-22-marketing-customer-lifetime-value_files/p83p.png)




# 3.3 Handling incomplete data


```{r, eval=F, echo=T}

```

![](/post/2020-09-22-marketing-customer-lifetime-value_files/p83p.png)



# 3.4 Total Sales


```{r, eval=F, echo=T}

```

![](/post/2020-09-22-marketing-customer-lifetime-value_files/p83p.png)




# 3.5 Create final dataframe

```{r, eval=F, echo=T}

```

![](/post/2020-09-22-marketing-customer-lifetime-value_files/p83p.png)





# 4 Descriptive Analytics
# 4.1 Final Dataframe for Descriptive Analytics


```{r, eval=F, echo=T}

```

![](/post/2020-09-22-marketing-customer-lifetime-value_files/p83p.png)




# 4.2 Visualizations


```{r, eval=F, echo=T}

```

![](/post/2020-09-22-marketing-customer-lifetime-value_files/p83p.png)




# 5 Predicting 3-Month CLV



```{r, eval=F, echo=T}

```

![](/post/2020-09-22-marketing-customer-lifetime-value_files/p83p.png)




# 5.1 Final Dataframe for Prediction Models




```{r, eval=F, echo=T}

```

![](/post/2020-09-22-marketing-customer-lifetime-value_files/p83p.png)




# 5.2 Building Sample Set



```{r, eval=F, echo=T}

```

![](/post/2020-09-22-marketing-customer-lifetime-value_files/p83p.png)




# 5.3 Train Test Split



```{r, eval=F, echo=T}

```

![](/post/2020-09-22-marketing-customer-lifetime-value_files/p83p.png)





# 5.4 Linear Regression



```{r, eval=F, echo=T}

```

![](/post/2020-09-22-marketing-customer-lifetime-value_files/p83p.png)





# 5.5 Model Evaluation



```{r, eval=F, echo=T}

```

![](/post/2020-09-22-marketing-customer-lifetime-value_files/p83p.png)




# 6 Conclusion









```{r, eval=F, echo=T}

```

![](/post/2020-09-22-marketing-customer-lifetime-value_files/p83p.png)



# References


Besemer, S. P. (1998). Creative product analysis matrix: testing the model structure and a comparison among products--three novel chairs. Creativity Research Journal, 11(4), 333-346.

Do Ruibin, K., & Vintilescu Borglöv, T. (2018). Predicting Customer Lifetime Value: Understanding its accuracy and drivers from a frequent flyer program perspective.

Glady, N., Baesens, B., & Croux, C. (2009). Modeling churn using customer lifetime value. European Journal of Operational Research, 197(1), 402-411.

Hwang, Y. (2019). Hands-On Data Science for Marketing: Improve your marketing strategies with machine learning using Python and R. Packt Publishing Ltd.

Johnston, B., Jones, A. & Kruger, C. (2019). Applied Unsupervised Learning with Python : Discover hidden patterns and relationships in unstructured data with Python. 
Packt Publishing Ltd.

Miller, T. W. (2015). Marketing data science: modeling techniques in predictive analytics with R and Python. FT Press.

Provost, F., & Fawcett, T. (2013). Data Science for Business: What you need to know about data mining and data-analytic thinking. " O'Reilly Media, Inc.".

Wedel, M., Kamakura, W., & Böckenholt, U. (2000). Marketing data, models and decisions. International Journal of Research in Marketing, 17(2-3), 203-208.

Xu, Z., Frankwick, G. L., & Ramirez, E. (2016). Effects of big data analytics and traditional marketing analytics on new product success: A knowledge fusion perspective. Journal of Business Research, 69(5), 1562-1566.



